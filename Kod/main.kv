#:import label kivy.uix.label
#:import sla kivy.adapters.simplelistadapter
#:import FadeTransition kivy.uix.screenmanager.FadeTransition

ScreenManagement:
    transition: FadeTransition()
    MainScreen:
    SetsScreen:
    TestsScreen:

<Label>
    font_size:50
    color: [0.153, 0.569, 0.655,1]

<Button>
    background_normal: ''

<MainScreen>:
    name: "main"

    canvas.before:
        Color:
            rgba: 0.686, 0.867, 0.918, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: [100,10,100,100]
        spacing: 10

        Label:
            text: 'Where is Mnemo?'

        Button:
            text: 'SETS'
            background_color: [0.839, 0.937, 0.957, 1]
            on_press: root.manager.current = 'sets'

        Button:
            text: 'TESTS'
            background_color:[0.38, 0.733, 0.835, 1]
            on_press: root.manager.current = 'tests'


[CustomListItem@SelectableView+GridLayout]:
    cols: 3
    size_hint_y: ctx.size_hint_y
    height:ctx.height
    spacing: 5

    canvas.before:
        Color:
            rgba: 0.839, 0.937, 0.957,1.
        Rectangle:
            pos: self.pos
            size: self.size

    Image:
        source:ctx.icon
        size_hint_x: None
        width: 50

    ListItemLabel:
        text: ctx.text
        font_size: 30
        borders: 5, 'solid', (1,1,1,1.)

        canvas.before:
            Color:
                rgba: 0.839, 0.937, 0.957,1.
            Rectangle:
                pos: self.pos
                size: self.size

    ListItemButton:
        size_hint_x: None
        width: 25
        font_size:30
        text: "x"
        on_press: print(ctx)
        background_color: [1, 0, 0, 1]


<SetsScreen>:
    name: "sets"

    canvas.before:
        Color:
            rgba: 0.686, 0.867, 0.918, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: [100,10,100,10]
        spacing: 20

        Label:
            size_hint:1, 0.2
            text: 'Sets'

        ListView:
            size_hint: 1, 1
            adapter:
                sla.SimpleListAdapter(
                data=root.sets,
                args_converter=root.sets_converter,
                template = 'CustomListItem')

        GridLayout:
            cols: 2
            row_default_height:45
            row_force_default: True
            spacing:5

            Button:
                size_hint: 1, 0.2
                background_color: [0.38, 0.733, 0.835, 1]
                text: 'Back'
                on_press: root.manager.current = 'main'

            Button:
                size_hint: 1, 0.2
                color: [0.4,0.3,0.5,1]
                background_color: [0.38, 0.733, 0.1, 1]
                text: 'Add'
                on_press: root.manager.current = 'main'

<TestsScreen>:
    name: "tests"

    canvas.before:
        Color:
            rgba: 0.686, 0.867, 0.918, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: [100,10,100,100]
        spacing: 10

        Label:
            text: 'Tests'

        Button:
            text: 'Add'
            background_color: [0, 0.8, 0, 1]

        Button:
            text: 'Remove'
            background_color: [0.75, 0, 0, 1]

        Button:
            text: 'Back'
            on_press: root.manager.current = 'main'